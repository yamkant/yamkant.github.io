---
layout: archive
title:  "[Study] Django - 설계 철학"
date:   2023-08-15 00:05:07 +0900
categories: 
    - Django Study
---

### 기본을 충실히 하자!
- 구현을 서둘러 하다보니, 기본적인 프레임워크의 철학과 기본기를 돌아볼 여유가 없어왔던 것 같습니다.
- 프레임워크에 대해서나 왜 사용하게 되었는지를 생각해 볼 때 설득력있는 설명을 할 수 있는 방법이 궁금했습니다.

## 설계 철학
### 일반
- Django 스택의 근본적인 목표는, 느슨한 결합과 탄탄한 응집으로 프레임워크의 각 계층이 서로 알지 못하도록 하는 것이 기본 원칙입니다.
- Django는 가능한 한 최소한의 코드를 사용하고, 틀에 박힌 코드를 배제하며, Python의 동적인 기능(ex. introspection)을 최대한 활용합니다.
    > introspection이란, 런타임 동안 객체의 타입을 결정하는 능력입니다. 파이썬의 모든 것은 객체이고, 객체가 지원하는 내장 함수와 모듈들이 있습니다.
- DRY: 중복성을 최소화하고, 최소한의 것들을 가지고 최대한의 것을 만들어내도록 합니다.
- 명시적인 것이 묵시적인 것보다 낫다는 PEP20을 따릅니다.
- 프레임워크는 모든 수준에서 일관적이어야 합니다. 이는 저수준(python code style)에서 고수준(django framework)에 이르기까지 적용됩니다.

### 모델
- 명시적인 것이 묵시적인 것보다 나음으로, 필드의 성질은 키워드 인자에 근거해야 하며, 경우에 따라서는 필드의 유형에 근거해야합니다.
- 활성 레코드 디자인 패턴에 따라 "객체"의 모든 aspect를 캡슐화해야합니다.
- 데이터를 모델로 표현하고, 모델을 이해하는 데 요구되는 모든 정보가 모델 내에 있어야 합니다.

### 데이터베이스 API
- SQL문은 가능한 적은 횟수로 실행해야 하며, 내부적으로 최적화해야합니다.
- 프레임워크에서 `save()`를 조용히 처리하는 것이 아닌, 개발자가 명시적으로 `save()`를 호출하도록 되어 있습니다.
- `join` 명령어가 요구될 때에는 겉으로 드러나지 않게 자동으로 수행되어야 합니다.
- 모든 객체는 시스템의 모든 관련 객체에 접근할 수 있어야 하며, 이러한 접근은 양방향이어야합니다.
- 필요할 경우에 SQL 문을 직접 작성하기 쉽게 설계해야합니다.

### URL 설계
- Django 앱의 URL을 Python 함수 이름과 같게 만드는 것은 좋지 않습니다.
- 웹페이지 URL에 파일 확장자를 넣는 것은 지양해야합니다.
- 기술적으로 `foo.com/bar`와 `foo.com/bar/`는 서로 다른 URL이며, 검색 엔진 로봇은 이를 별도로 취급합니다.
- 따라서, APPEND_SLASH 설정을 True로 하는 경우, `/`가 붙지 않더라도 리다이렉션 시킵니다. 
    > 주의: POST 메서드를 사용하는 경우 리다이렉트를 사용해버리면 데이터가 소실될 가능성도 있습니다.

### 템플릿 시스템
- 표현과 로직을 분리해야합니다.
- 대다수의 동적인 웹사이트는 공통 헤더, 푸터, 네비게이션 바와 같은 사이트의 공통 디자인을 갖습니다. Django 템플릿 시스템은 이러한 요소를 한 곳에 저장하기 쉽게하여 중복 코드를 없애야합니다.
- 템플릿은 HTML 뿐만 아니라, 텍스트 기반 포맷 또는 일반 텍스트도 잘 생성할 수 있어야 합니다.
- XML을 템플릿 언어로 사용하지 않아야 합니다.
- 템플릿은 데이터베이스의 레코드를 삭제하는 명령과 같은 악의적인 코드를 포함할 수 없어야 합니다. 

### 뷰
- 함수로 처리할 수 있는 일을 하기 위해 클래스의 인스턴스를 굳이 생성하지 않아도 됩니다.
- 글로벌 변수의 요청 데이터에 접근하는 것이 아닌 뷰 함수에 전달된 요청 객체에 각각 접근해야합니다.
- 뷰는 개발자가 어떤 템플릿을 사용하는지에 무관해야합니다.